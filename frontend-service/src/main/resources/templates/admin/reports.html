<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Admin | Reports</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" th:href="@{/css/style.css}">

  <style>
    body {
        font-family: 'Inter', sans-serif;
        background: #f3f4f6;
    }

    .container {
        max-width: 1100px;
        margin: auto;
        padding: 2rem;
    }

    .report-card {
        background: white;
        padding: 2rem;
        border-radius: 14px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        margin-bottom: 2rem;
    }

    .search-form {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
    }

    input, button {
        padding: 10px;
        border-radius: 6px;
        border: 1px solid #d1d5db;
    }

    button {
        background: #2563eb;
        color: white;
        border: none;
        cursor: pointer;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        background: white;
        border-radius: 12px;
        overflow: hidden;
    }

    th, td {
        padding: 1rem;
        border-bottom: 1px solid #e5e7eb;
    }

    th {
        background: #f9fafb;
        text-transform: uppercase;
        font-size: 0.8rem;
        color: #6b7280;
    }
  </style>
</head>

<body>

<div th:replace="~{fragments/header :: header}"></div>

<div class="container">

  <h1>Reports Dashboard</h1>

  <!-- Search by Destination -->
  <div class="report-card">
    <h3>Search by Destination</h3>
    <form th:action="@{/reports/admin/destination}" method="get" class="search-form">
      <input type="text" name="destination" placeholder="Enter destination (e.g. Delhi)" required>
      <button type="submit">Search</button>
    </form>
  </div>

  <!-- Search by Date -->
  <div class="report-card">
    <h3>Search by Date</h3>
    <form th:action="@{/reports/admin/date}" method="get" class="search-form">
      <input type="date" name="date" required>
      <button type="submit">Search</button>
    </form>
  </div>

  <!-- Results -->
  <div th:if="${bookings != null}" class="report-card">

    <h3>
      Results for
      <span th:text="${filterType}"></span> :
      <strong th:text="${filterValue}"></strong>
    </h3>

    <div th:if="${#lists.isEmpty(bookings)}">
      No records found.
    </div>

    <table th:if="${!#lists.isEmpty(bookings)}">
      <thead>
      <tr>
        <th>#</th>
        <th>Booking ID</th>
        <th>Airline</th>
        <th>Flight No</th>
        <th>Source</th>
        <th>Destination</th>
        <th>Date</th>
        <th>Seats</th>
        <th>Status</th>
      </tr>
      </thead>

      <tbody>
      <tr th:each="b, stat : ${bookings}">
        <td th:text="${stat.count}"></td>
        <td th:text="${b.bookingId}"></td>
        <td th:text="${b.airLine}"></td>
        <td th:text="${b.flightNumber}"></td>
        <td th:text="${b.source}"></td>
        <td th:text="${b.destination}"></td>
        <td th:text="${#temporals.format(b.journeyDate, 'dd MMM yyyy')}"></td>
        <td th:text="${b.seatsBooked}"></td>
        <td th:text="${b.status}"></td>
      </tr>
      </tbody>
    </table>


  </div>

</div>

</body>
</html>
